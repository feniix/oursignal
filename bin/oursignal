#!/usr/bin/env ruby
require File.join(File.dirname(__FILE__), '..', 'lib', 'oursignal', 'cli')

bin     = Oursignal::Cli.bin
command = (ARGV.shift || 'help').strip
usage   = %Q{
usage: #{bin} [-h|--help] command args

Commands are:
  config  Environment and paths.
  devel   Development tools.
  feed    Do stuff with feeds.
  job     Job queue, workers etc.
  score   Scoring related stuff.

See '#{bin} command --help' for more information on specific commands.
}.strip

if command.nil? or command =~ /^\-{0,2}h(?:elp)?$/
  puts usage
  exit
end

command_bin = File.join(Oursignal::Cli.root, 'bin', [bin, command].join('-'))
unless File.executable?(command_bin)
  warn "#{bin}: '#{command}' is not an #{bin} command. See '#{bin} --help'."
  exit -1
end

exec command_bin, *ARGV

